(function(ee,M){typeof exports=="object"&&typeof module<"u"?M(exports,require("vue")):typeof define=="function"&&define.amd?define(["exports","vue"],M):(ee=typeof globalThis<"u"?globalThis:ee||self,M(ee.VueQrcodeReader={},ee.Vue))})(this,function(ee,M){"use strict";var At=(r,i,o)=>{if(!i.has(r))throw TypeError("Cannot "+o)},Rt=(r,i,o)=>(At(r,i,"read from private field"),o?o.call(r):i.get(r)),Kr=(r,i,o)=>{if(i.has(r))throw TypeError("Cannot add the same private member more than once");i instanceof WeakSet?i.add(r):i.set(r,o)},Xr=(r,i,o,u)=>(At(r,i,"write to private field"),u?u.call(r,o):i.set(r,o),o);const xt=["aztec","code_128","code_39","code_93","codabar","data_matrix","ean_13","ean_8","itf","pdf417","qr_code","upc_a","upc_e","unknown"];function en(r){if(Ft(r))return{width:r.naturalWidth,height:r.naturalHeight};if(kt(r))return{width:r.width.baseVal.value,height:r.height.baseVal.value};if(It(r))return{width:r.videoWidth,height:r.videoHeight};if(Ut(r))return{width:r.width,height:r.height};if(Ht(r))return{width:r.displayWidth,height:r.displayHeight};if(jt(r))return{width:r.width,height:r.height};if(Lt(r))return{width:r.width,height:r.height};throw new TypeError("The provided value is not of type '(Blob or HTMLCanvasElement or HTMLImageElement or HTMLVideoElement or ImageBitmap or ImageData or OffscreenCanvas or SVGImageElement or VideoFrame)'.")}function Ft(r){try{return r instanceof HTMLImageElement}catch(i){return!1}}function kt(r){try{return r instanceof SVGImageElement}catch(i){return!1}}function It(r){try{return r instanceof HTMLVideoElement}catch(i){return!1}}function jt(r){try{return r instanceof HTMLCanvasElement}catch(i){return!1}}function Ut(r){try{return r instanceof ImageBitmap}catch(i){return!1}}function Lt(r){try{return r instanceof OffscreenCanvas}catch(i){return!1}}function Ht(r){try{return r instanceof VideoFrame}catch(i){return!1}}function Wt(r){try{return r instanceof Blob}catch(i){return!1}}function tn(r){try{return r instanceof ImageData}catch(i){return!1}}function rn(r,i){try{const o=new OffscreenCanvas(r,i);if(o.getContext("2d")instanceof OffscreenCanvasRenderingContext2D)return o;throw void 0}catch(o){const u=document.createElement("canvas");return u.width=r,u.height=i,u}}async function Vt(r){if(Ft(r)&&!await sn(r))throw new DOMException("Failed to load or decode HTMLImageElement.","InvalidStateError");if(kt(r)&&!await cn(r))throw new DOMException("Failed to load or decode SVGImageElement.","InvalidStateError");if(Ht(r)&&un(r))throw new DOMException("VideoFrame is closed.","InvalidStateError");if(It(r)&&(r.readyState===0||r.readyState===1))throw new DOMException("Invalid element or state.","InvalidStateError");if(Ut(r)&&dn(r))throw new DOMException("The image source is detached.","InvalidStateError");const{width:i,height:o}=en(r);if(i===0||o===0)return null;const u=rn(i,o).getContext("2d");u.drawImage(r,0,0);try{return u.getImageData(0,0,i,o)}catch(f){throw new DOMException("Source would taint origin.","SecurityError")}}async function nn(r){let i;try{if(createImageBitmap)i=await createImageBitmap(r);else if(Image){i=new Image;let o="";try{o=URL.createObjectURL(r),i.src=o,await i.decode()}finally{URL.revokeObjectURL(o)}}else return r}catch(o){throw new DOMException("Failed to load or decode Blob.","InvalidStateError")}return await Vt(i)}function an(r){const{width:i,height:o}=r;if(i===0||o===0)return null;const u=r.getContext("2d");try{return u.getImageData(0,0,i,o)}catch(f){throw new DOMException("Source would taint origin.","SecurityError")}}async function on(r){if(Wt(r))return await nn(r);if(tn(r)){if(ln(r))throw new DOMException("The image data has been detached.","InvalidStateError");return r}return jt(r)||Lt(r)?an(r):await Vt(r)}async function sn(r){try{return await r.decode(),!0}catch(i){return!1}}async function cn(r){var i;try{return await((i=r.decode)==null?void 0:i.call(r)),!0}catch(o){return!1}}function un(r){return r.format===null}function ln(r){return r.data.buffer.byteLength===0}function dn(r){return r.width===0&&r.height===0}function Bt(r,i){return r instanceof DOMException?new DOMException(`${i}: ${r.message}`,r.name):r instanceof Error?new r.constructor(`${i}: ${r.message}`):new Error(`${i}: ${r}`)}const zt=r=>{let i;const o=new Set,u=(m,w)=>{const b=typeof m=="function"?m(i):m;if(!Object.is(b,i)){const v=i;i=(w!=null?w:typeof b!="object")?b:Object.assign({},i,b),o.forEach(_=>_(i,v))}},f=()=>i,p={setState:u,getState:f,subscribe:m=>(o.add(m),()=>o.delete(m)),destroy:()=>{o.clear()}};return i=r(u,f,p),p},fn=r=>r?zt(r):zt,hn={locateFile:(r,i)=>{var o;const u=(o=r.match(/_(.+?)\.wasm$/))==null?void 0:o[1];return u?`https://fastly.jsdelivr.net/npm/@sec-ant/zxing-wasm@2.1.5/dist/${u}/${r}`:i+r}},ge=fn()(()=>({zxingModuleWeakMap:new WeakMap,zxingModuleOverrides:hn}));function pn(r){ge.setState({zxingModuleOverrides:r})}function st(r,i=ge.getState().zxingModuleOverrides){const{zxingModuleWeakMap:o}=ge.getState(),u=o.get(r);if(u&&Object.is(i,ge.getState().zxingModuleOverrides))return u;{ge.setState({zxingModuleOverrides:i});const f=r(i);return o.set(r,f),f}}const Nt=["Aztec","Codabar","Code128","Code39","Code93","DataBar","DataBarExpanded","DataMatrix","EAN-13","EAN-8","ITF","Linear-Codes","Matrix-Codes","MaxiCode","MicroQRCode","None","PDF417","QRCode","UPC-A","UPC-E"],Z={tryHarder:!0,formats:[],maxSymbols:255};async function mn(r,{tryHarder:i=Z.tryHarder,formats:o=Z.formats,maxSymbols:u=Z.maxSymbols}=Z,f){const p=await st(f,ge.getState().zxingModuleOverrides),{size:m}=r,w=new Uint8Array(await r.arrayBuffer()),b=p._malloc(m);p.HEAP8.set(w,b);const v=p.readBarcodesFromImage(b,m,i,Gt(o),u);p._free(b);const _=[];for(let S=0;S<v.size();++S){const $=v.get(S);_.push({...$,format:qt($.format)})}return _}async function vn(r,{tryHarder:i=Z.tryHarder,formats:o=Z.formats,maxSymbols:u=Z.maxSymbols}=Z,f){const p=await st(f,ge.getState().zxingModuleOverrides),{data:m,width:w,height:b,data:{byteLength:v}}=r,_=p._malloc(v);p.HEAP8.set(m,_);const S=p.readBarcodesFromPixmap(_,w,b,i,Gt(o),u);p._free(_);const $=[];for(let H=0;H<S.size();++H){const U=S.get(H);$.push({...U,format:qt(U.format)})}return $}function Gt(r){return r.join("|")}function qt(r){const i=Yt(r);let o=0,u=Nt.length-1;for(;o<=u;){const f=Math.floor((o+u)/2),p=Nt[f],m=Yt(p);if(m===i)return p;m<i?o=f+1:u=f-1}return"None"}function Yt(r){return r.toLowerCase().replace(/_-\[\]/g,"")}var ct=(()=>{var r=typeof document>"u"&&typeof location>"u"?require("url").pathToFileURL(__filename).href:typeof document>"u"?location.href:document.currentScript&&document.currentScript.src||new URL("vue-qrcode-reader.umd.cjs",document.baseURI).href;return function(i={}){var o=i,u,f;o.ready=new Promise((e,t)=>{u=e,f=t});var p=Object.assign({},o),m="./this.program",w=typeof window=="object",b=typeof importScripts=="function";typeof process=="object"&&typeof process.versions=="object"&&process.versions.node;var v="";function _(e){return o.locateFile?o.locateFile(e,v):v+e}var S;(w||b)&&(b?v=self.location.href:typeof document<"u"&&document.currentScript&&(v=document.currentScript.src),r&&(v=r),v.indexOf("blob:")!==0?v=v.substr(0,v.replace(/[?#].*/,"").lastIndexOf("/")+1):v="",b&&(S=e=>{var t=new XMLHttpRequest;return t.open("GET",e,!1),t.responseType="arraybuffer",t.send(null),new Uint8Array(t.response)})),o.print||console.log.bind(console);var $=o.printErr||console.error.bind(console);Object.assign(o,p),p=null,o.arguments&&o.arguments,o.thisProgram&&(m=o.thisProgram),o.quit&&o.quit;var H;o.wasmBinary&&(H=o.wasmBinary),o.noExitRuntime,typeof WebAssembly!="object"&&Pe("no native wasm support detected");var U,W=!1,L,E,I,q,N,j,$e,Se;function Me(){var e=U.buffer;o.HEAP8=L=new Int8Array(e),o.HEAP16=I=new Int16Array(e),o.HEAPU8=E=new Uint8Array(e),o.HEAPU16=q=new Uint16Array(e),o.HEAP32=N=new Int32Array(e),o.HEAPU32=j=new Uint32Array(e),o.HEAPF32=$e=new Float32Array(e),o.HEAPF64=Se=new Float64Array(e)}var De=[],Ae=[],Be=[];function ft(){if(o.preRun)for(typeof o.preRun=="function"&&(o.preRun=[o.preRun]);o.preRun.length;)Re(o.preRun.shift());gt(De)}function ht(){gt(Ae)}function pt(){if(o.postRun)for(typeof o.postRun=="function"&&(o.postRun=[o.postRun]);o.postRun.length;)mt(o.postRun.shift());gt(Be)}function Re(e){De.unshift(e)}function ze(e){Ae.unshift(e)}function mt(e){Be.unshift(e)}var ce=0,te=null;function oe(e){ce++,o.monitorRunDependencies&&o.monitorRunDependencies(ce)}function vt(e){if(ce--,o.monitorRunDependencies&&o.monitorRunDependencies(ce),ce==0&&te){var t=te;te=null,t()}}function Pe(e){o.onAbort&&o.onAbort(e),e="Aborted("+e+")",$(e),W=!0,e+=". Build with -sASSERTIONS for more info.";var t=new WebAssembly.RuntimeError(e);throw f(t),t}var yt="data:application/octet-stream;base64,";function Ne(e){return e.startsWith(yt)}var ue;o.locateFile?(ue="zxing_reader.wasm",Ne(ue)||(ue=_(ue))):ue=new URL("/reader/zxing_reader.wasm",self.location).href;function Ge(e){if(e==ue&&H)return new Uint8Array(H);if(S)return S(e);throw"both async and sync fetching of the wasm failed"}function sa(e){return!H&&(w||b)&&typeof fetch=="function"?fetch(e,{credentials:"same-origin"}).then(t=>{if(!t.ok)throw"failed to load wasm binary file at '"+e+"'";return t.arrayBuffer()}).catch(()=>Ge(e)):Promise.resolve().then(()=>Ge(e))}function vr(e,t,n){return sa(e).then(a=>WebAssembly.instantiate(a,t)).then(a=>a).then(n,a=>{$(`failed to asynchronously prepare wasm: ${a}`),Pe(a)})}function ca(e,t,n,a){return!e&&typeof WebAssembly.instantiateStreaming=="function"&&!Ne(t)&&typeof fetch=="function"?fetch(t,{credentials:"same-origin"}).then(s=>{var c=WebAssembly.instantiateStreaming(s,n);return c.then(a,function(l){return $(`wasm streaming compile failed: ${l}`),$("falling back to ArrayBuffer instantiation"),vr(t,n,a)})}):vr(t,n,a)}function ua(){var e={a:Vo};function t(a,s){return z=a.exports,U=z.qa,Me(),Dr=z.ua,ze(z.ra),vt(),z}oe();function n(a){t(a.instance)}if(o.instantiateWasm)try{return o.instantiateWasm(e,t)}catch(a){$(`Module.instantiateWasm callback failed with error: ${a}`),f(a)}return ca(H,ue,e,n).catch(f),{}}var gt=e=>{for(;e.length>0;)e.shift()(o)},qe=[],Ye=0,la=e=>{var t=new Je(e);return t.get_caught()||(t.set_caught(!0),Ye--),t.set_rethrown(!1),qe.push(t),Gr(t.excPtr),t.get_exception_ptr()},le=0,da=()=>{D(0,0);var e=qe.pop();Nr(e.excPtr),le=0};function Je(e){this.excPtr=e,this.ptr=e-24,this.set_type=function(t){j[this.ptr+4>>2]=t},this.get_type=function(){return j[this.ptr+4>>2]},this.set_destructor=function(t){j[this.ptr+8>>2]=t},this.get_destructor=function(){return j[this.ptr+8>>2]},this.set_caught=function(t){t=t?1:0,L[this.ptr+12>>0]=t},this.get_caught=function(){return L[this.ptr+12>>0]!=0},this.set_rethrown=function(t){t=t?1:0,L[this.ptr+13>>0]=t},this.get_rethrown=function(){return L[this.ptr+13>>0]!=0},this.init=function(t,n){this.set_adjusted_ptr(0),this.set_type(t),this.set_destructor(n)},this.set_adjusted_ptr=function(t){j[this.ptr+16>>2]=t},this.get_adjusted_ptr=function(){return j[this.ptr+16>>2]},this.get_exception_ptr=function(){var t=Yr(this.get_type());if(t)return j[this.excPtr>>2];var n=this.get_adjusted_ptr();return n!==0?n:this.excPtr}}var fa=e=>{throw le||(le=e),le},wt=e=>{var t=le;if(!t)return Ue(0),0;var n=new Je(t);n.set_adjusted_ptr(t);var a=n.get_type();if(!a)return Ue(0),t;for(var s in e){var c=e[s];if(c===0||c===a)break;var l=n.ptr+16;if(qr(c,a,l))return Ue(c),t}return Ue(a),t},ha=()=>wt([]),pa=e=>wt([e]),ma=(e,t)=>wt([e,t]),va=e=>{var t=new Je(e).get_exception_ptr();return t},ya=()=>{var e=qe.pop();e||Pe("no exception to throw");var t=e.excPtr;throw e.get_rethrown()||(qe.push(e),e.set_rethrown(!0),e.set_caught(!1),Ye++),le=t,le},ga=(e,t,n)=>{var a=new Je(e);throw a.init(t,n),le=e,Ye++,le},wa=()=>Ye,Qe={},yr=e=>{for(;e.length;){var t=e.pop(),n=e.pop();n(t)}};function bt(e){return this.fromWireType(N[e>>2])}var Te={},we={},Ze={},gr,Ke=e=>{throw new gr(e)},be=(e,t,n)=>{e.forEach(function(d){Ze[d]=t});function a(d){var h=n(d);h.length!==e.length&&Ke("Mismatched type converter count");for(var y=0;y<e.length;++y)de(e[y],h[y])}var s=new Array(t.length),c=[],l=0;t.forEach((d,h)=>{we.hasOwnProperty(d)?s[h]=we[d]:(c.push(d),Te.hasOwnProperty(d)||(Te[d]=[]),Te[d].push(()=>{s[h]=we[d],++l,l===c.length&&a(s)}))}),c.length===0&&a(s)},ba=e=>{var t=Qe[e];delete Qe[e];var n=t.rawConstructor,a=t.rawDestructor,s=t.fields,c=s.map(l=>l.getterReturnType).concat(s.map(l=>l.setterArgumentType));be([e],c,l=>{var d={};return s.forEach((h,y)=>{var C=h.fieldName,T=l[y],O=h.getter,x=h.getterContext,V=l[y+s.length],J=h.setter,B=h.setterContext;d[C]={read:Q=>T.fromWireType(O(x,Q)),write:(Q,g)=>{var P=[];J(B,Q,V.toWireType(P,g)),yr(P)}}}),[{name:t.name,fromWireType:h=>{var y={};for(var C in d)y[C]=d[C].read(h);return a(h),y},toWireType:(h,y)=>{for(var C in d)if(!(C in y))throw new TypeError(`Missing field: "${C}"`);var T=n();for(C in d)d[C].write(T,y[C]);return h!==null&&h.push(a,T),T},argPackAdvance:fe,readValueFromPointer:bt,destructorFunction:a}]})},Ca=(e,t,n,a,s)=>{},_a=()=>{for(var e=new Array(256),t=0;t<256;++t)e[t]=String.fromCharCode(t);wr=e},wr,K=e=>{for(var t="",n=e;E[n];)t+=wr[E[n++]];return t},Ee,F=e=>{throw new Ee(e)};function $a(e,t,n={}){var a=t.name;if(e||F(`type "${a}" must have a positive integer typeid pointer`),we.hasOwnProperty(e)){if(n.ignoreDuplicateRegistrations)return;F(`Cannot register type '${a}' twice`)}if(we[e]=t,delete Ze[e],Te.hasOwnProperty(e)){var s=Te[e];delete Te[e],s.forEach(c=>c())}}function de(e,t,n={}){if(!("argPackAdvance"in t))throw new TypeError("registerType registeredInstance requires argPackAdvance");return $a(e,t,n)}var fe=8,Sa=(e,t,n,a)=>{t=K(t),de(e,{name:t,fromWireType:function(s){return!!s},toWireType:function(s,c){return c?n:a},argPackAdvance:fe,readValueFromPointer:function(s){return this.fromWireType(E[s])},destructorFunction:null})},Pa=e=>({count:e.count,deleteScheduled:e.deleteScheduled,preservePointerOnDelete:e.preservePointerOnDelete,ptr:e.ptr,ptrType:e.ptrType,smartPtr:e.smartPtr,smartPtrType:e.smartPtrType}),Ct=e=>{function t(n){return n.$$.ptrType.registeredClass.name}F(t(e)+" instance already deleted")},_t=!1,br=e=>{},Ta=e=>{e.smartPtr?e.smartPtrType.rawDestructor(e.smartPtr):e.ptrType.registeredClass.rawDestructor(e.ptr)},Cr=e=>{e.count.value-=1;var t=e.count.value===0;t&&Ta(e)},_r=(e,t,n)=>{if(t===n)return e;if(n.baseClass===void 0)return null;var a=_r(e,t,n.baseClass);return a===null?null:n.downcast(a)},$r={},Ea=()=>Object.keys(ke).length,Oa=()=>{var e=[];for(var t in ke)ke.hasOwnProperty(t)&&e.push(ke[t]);return e},xe=[],$t=()=>{for(;xe.length;){var e=xe.pop();e.$$.deleteScheduled=!1,e.delete()}},Fe,Ma=e=>{Fe=e,xe.length&&Fe&&Fe($t)},Da=()=>{o.getInheritedInstanceCount=Ea,o.getLiveInheritedInstances=Oa,o.flushPendingDeletes=$t,o.setDelayFunction=Ma},ke={},Aa=(e,t)=>{for(t===void 0&&F("ptr should not be undefined");e.baseClass;)t=e.upcast(t),e=e.baseClass;return t},Ra=(e,t)=>(t=Aa(e,t),ke[t]),Xe=(e,t)=>{(!t.ptrType||!t.ptr)&&Ke("makeClassHandle requires ptr and ptrType");var n=!!t.smartPtrType,a=!!t.smartPtr;return n!==a&&Ke("Both smartPtrType and smartPtr must be specified"),t.count={value:1},Ie(Object.create(e,{$$:{value:t}}))};function xa(e){var t=this.getPointee(e);if(!t)return this.destructor(e),null;var n=Ra(this.registeredClass,t);if(n!==void 0){if(n.$$.count.value===0)return n.$$.ptr=t,n.$$.smartPtr=e,n.clone();var a=n.clone();return this.destructor(e),a}function s(){return this.isSmartPointer?Xe(this.registeredClass.instancePrototype,{ptrType:this.pointeeType,ptr:t,smartPtrType:this,smartPtr:e}):Xe(this.registeredClass.instancePrototype,{ptrType:this,ptr:e})}var c=this.registeredClass.getActualType(t),l=$r[c];if(!l)return s.call(this);var d;this.isConst?d=l.constPointerType:d=l.pointerType;var h=_r(t,this.registeredClass,d.registeredClass);return h===null?s.call(this):this.isSmartPointer?Xe(d.registeredClass.instancePrototype,{ptrType:d,ptr:h,smartPtrType:this,smartPtr:e}):Xe(d.registeredClass.instancePrototype,{ptrType:d,ptr:h})}var Ie=e=>typeof FinalizationRegistry>"u"?(Ie=t=>t,e):(_t=new FinalizationRegistry(t=>{Cr(t.$$)}),Ie=t=>{var n=t.$$,a=!!n.smartPtr;if(a){var s={$$:n};_t.register(t,s,t)}return t},br=t=>_t.unregister(t),Ie(e)),Fa=()=>{Object.assign(et.prototype,{isAliasOf(e){if(!(this instanceof et)||!(e instanceof et))return!1;var t=this.$$.ptrType.registeredClass,n=this.$$.ptr;e.$$=e.$$;for(var a=e.$$.ptrType.registeredClass,s=e.$$.ptr;t.baseClass;)n=t.upcast(n),t=t.baseClass;for(;a.baseClass;)s=a.upcast(s),a=a.baseClass;return t===a&&n===s},clone(){if(this.$$.ptr||Ct(this),this.$$.preservePointerOnDelete)return this.$$.count.value+=1,this;var e=Ie(Object.create(Object.getPrototypeOf(this),{$$:{value:Pa(this.$$)}}));return e.$$.count.value+=1,e.$$.deleteScheduled=!1,e},delete(){this.$$.ptr||Ct(this),this.$$.deleteScheduled&&!this.$$.preservePointerOnDelete&&F("Object already scheduled for deletion"),br(this),Cr(this.$$),this.$$.preservePointerOnDelete||(this.$$.smartPtr=void 0,this.$$.ptr=void 0)},isDeleted(){return!this.$$.ptr},deleteLater(){return this.$$.ptr||Ct(this),this.$$.deleteScheduled&&!this.$$.preservePointerOnDelete&&F("Object already scheduled for deletion"),xe.push(this),xe.length===1&&Fe&&Fe($t),this.$$.deleteScheduled=!0,this}})};function et(){}var ka=48,Ia=57,Sr=e=>{if(e===void 0)return"_unknown";e=e.replace(/[^a-zA-Z0-9_]/g,"$");var t=e.charCodeAt(0);return t>=ka&&t<=Ia?`_${e}`:e};function Pr(e,t){return e=Sr(e),{[e]:function(){return t.apply(this,arguments)}}[e]}var Tr=(e,t,n)=>{if(e[t].overloadTable===void 0){var a=e[t];e[t]=function(){return e[t].overloadTable.hasOwnProperty(arguments.length)||F(`Function '${n}' called with an invalid number of arguments (${arguments.length}) - expects one of (${e[t].overloadTable})!`),e[t].overloadTable[arguments.length].apply(this,arguments)},e[t].overloadTable=[],e[t].overloadTable[a.argCount]=a}},Er=(e,t,n)=>{o.hasOwnProperty(e)?((n===void 0||o[e].overloadTable!==void 0&&o[e].overloadTable[n]!==void 0)&&F(`Cannot register public name '${e}' twice`),Tr(o,e,e),o.hasOwnProperty(n)&&F(`Cannot register multiple overloads of a function with the same number of arguments (${n})!`),o[e].overloadTable[n]=t):(o[e]=t,n!==void 0&&(o[e].numArguments=n))};function ja(e,t,n,a,s,c,l,d){this.name=e,this.constructor=t,this.instancePrototype=n,this.rawDestructor=a,this.baseClass=s,this.getActualType=c,this.upcast=l,this.downcast=d,this.pureVirtualFunctions=[]}var St=(e,t,n)=>{for(;t!==n;)t.upcast||F(`Expected null or instance of ${n.name}, got an instance of ${t.name}`),e=t.upcast(e),t=t.baseClass;return e};function Ua(e,t){if(t===null)return this.isReference&&F(`null is not a valid ${this.name}`),0;t.$$||F(`Cannot pass "${Et(t)}" as a ${this.name}`),t.$$.ptr||F(`Cannot pass deleted object as a pointer of type ${this.name}`);var n=t.$$.ptrType.registeredClass,a=St(t.$$.ptr,n,this.registeredClass);return a}function La(e,t){var n;if(t===null)return this.isReference&&F(`null is not a valid ${this.name}`),this.isSmartPointer?(n=this.rawConstructor(),e!==null&&e.push(this.rawDestructor,n),n):0;t.$$||F(`Cannot pass "${Et(t)}" as a ${this.name}`),t.$$.ptr||F(`Cannot pass deleted object as a pointer of type ${this.name}`),!this.isConst&&t.$$.ptrType.isConst&&F(`Cannot convert argument of type ${t.$$.smartPtrType?t.$$.smartPtrType.name:t.$$.ptrType.name} to parameter type ${this.name}`);var a=t.$$.ptrType.registeredClass;if(n=St(t.$$.ptr,a,this.registeredClass),this.isSmartPointer)switch(t.$$.smartPtr===void 0&&F("Passing raw pointer to smart pointer is illegal"),this.sharingPolicy){case 0:t.$$.smartPtrType===this?n=t.$$.smartPtr:F(`Cannot convert argument of type ${t.$$.smartPtrType?t.$$.smartPtrType.name:t.$$.ptrType.name} to parameter type ${this.name}`);break;case 1:n=t.$$.smartPtr;break;case 2:if(t.$$.smartPtrType===this)n=t.$$.smartPtr;else{var s=t.clone();n=this.rawShare(n,ye.toHandle(()=>s.delete())),e!==null&&e.push(this.rawDestructor,n)}break;default:F("Unsupporting sharing policy")}return n}function Ha(e,t){if(t===null)return this.isReference&&F(`null is not a valid ${this.name}`),0;t.$$||F(`Cannot pass "${Et(t)}" as a ${this.name}`),t.$$.ptr||F(`Cannot pass deleted object as a pointer of type ${this.name}`),t.$$.ptrType.isConst&&F(`Cannot convert argument of type ${t.$$.ptrType.name} to parameter type ${this.name}`);var n=t.$$.ptrType.registeredClass,a=St(t.$$.ptr,n,this.registeredClass);return a}function Or(e){return this.fromWireType(j[e>>2])}var Wa=()=>{Object.assign(tt.prototype,{getPointee(e){return this.rawGetPointee&&(e=this.rawGetPointee(e)),e},destructor(e){this.rawDestructor&&this.rawDestructor(e)},argPackAdvance:fe,readValueFromPointer:Or,deleteObject(e){e!==null&&e.delete()},fromWireType:xa})};function tt(e,t,n,a,s,c,l,d,h,y,C){this.name=e,this.registeredClass=t,this.isReference=n,this.isConst=a,this.isSmartPointer=s,this.pointeeType=c,this.sharingPolicy=l,this.rawGetPointee=d,this.rawConstructor=h,this.rawShare=y,this.rawDestructor=C,!s&&t.baseClass===void 0?a?(this.toWireType=Ua,this.destructorFunction=null):(this.toWireType=Ha,this.destructorFunction=null):this.toWireType=La}var Mr=(e,t,n)=>{o.hasOwnProperty(e)||Ke("Replacing nonexistant public symbol"),o[e].overloadTable!==void 0&&n!==void 0?o[e].overloadTable[n]=t:(o[e]=t,o[e].argCount=n)},Va=(e,t,n)=>{var a=o["dynCall_"+e];return n&&n.length?a.apply(null,[t].concat(n)):a.call(null,t)},rt=[],Dr,k=e=>{var t=rt[e];return t||(e>=rt.length&&(rt.length=e+1),rt[e]=t=Dr.get(e)),t},Ba=(e,t,n)=>{if(e.includes("j"))return Va(e,t,n);var a=k(t).apply(null,n);return a},za=(e,t)=>{var n=[];return function(){return n.length=0,Object.assign(n,arguments),Ba(e,t,n)}},ne=(e,t)=>{e=K(e);function n(){return e.includes("j")?za(e,t):k(t)}var a=n();return typeof a!="function"&&F(`unknown function pointer with signature ${e}: ${t}`),a},Na=(e,t)=>{var n=Pr(t,function(a){this.name=t,this.message=a;var s=new Error(a).stack;s!==void 0&&(this.stack=this.toString()+`
`+s.replace(/^Error(:[^\n]*)?\n/,""))});return n.prototype=Object.create(e.prototype),n.prototype.constructor=n,n.prototype.toString=function(){return this.message===void 0?this.name:`${this.name}: ${this.message}`},n},Ar,Rr=e=>{var t=zr(e),n=K(t);return he(t),n},nt=(e,t)=>{var n=[],a={};function s(c){if(!a[c]&&!we[c]){if(Ze[c]){Ze[c].forEach(s);return}n.push(c),a[c]=!0}}throw t.forEach(s),new Ar(`${e}: `+n.map(Rr).join([", "]))},Ga=(e,t,n,a,s,c,l,d,h,y,C,T,O)=>{C=K(C),c=ne(s,c),d&&(d=ne(l,d)),y&&(y=ne(h,y)),O=ne(T,O);var x=Sr(C);Er(x,function(){nt(`Cannot construct ${C} due to unbound types`,[a])}),be([e,t,n],a?[a]:[],function(V){V=V[0];var J,B;a?(J=V.registeredClass,B=J.instancePrototype):B=et.prototype;var Q=Pr(x,function(){if(Object.getPrototypeOf(this)!==g)throw new Ee("Use 'new' to construct "+C);if(P.constructor_body===void 0)throw new Ee(C+" has no accessible constructor");var it=P.constructor_body[arguments.length];if(it===void 0)throw new Ee(`Tried to invoke ctor of ${C} with invalid number of parameters (${arguments.length}) - expected (${Object.keys(P.constructor_body).toString()}) parameters instead!`);return it.apply(this,arguments)}),g=Object.create(B,{constructor:{value:Q}});Q.prototype=g;var P=new ja(C,Q,g,O,J,c,d,y);P.baseClass&&(P.baseClass.__derivedClasses===void 0&&(P.baseClass.__derivedClasses=[]),P.baseClass.__derivedClasses.push(P));var G=new tt(C,P,!0,!1,!1),Y=new tt(C+"*",P,!1,!1,!1),Ce=new tt(C+" const*",P,!1,!0,!1);return $r[e]={pointerType:Y,constPointerType:Ce},Mr(x,Q),[G,Y,Ce]})},Pt=(e,t)=>{for(var n=[],a=0;a<e;a++)n.push(j[t+a*4>>2]);return n};function Tt(e,t,n,a,s,c){var l=t.length;l<2&&F("argTypes array size mismatch! Must at least get return value and 'this' types!");for(var d=t[1]!==null&&n!==null,h=!1,y=1;y<t.length;++y)if(t[y]!==null&&t[y].destructorFunction===void 0){h=!0;break}var C=t[0].name!=="void",T=l-2,O=new Array(T),x=[],V=[];return function(){arguments.length!==T&&F(`function ${e} called with ${arguments.length} arguments, expected ${T}`),V.length=0;var J;x.length=d?2:1,x[0]=s,d&&(J=t[1].toWireType(V,this),x[1]=J);for(var B=0;B<T;++B)O[B]=t[B+2].toWireType(V,arguments[B]),x.push(O[B]);var Q=a.apply(null,x);function g(P){if(h)yr(V);else for(var G=d?1:2;G<t.length;G++){var Y=G===1?J:O[G-2];t[G].destructorFunction!==null&&t[G].destructorFunction(Y)}if(C)return t[0].fromWireType(P)}return g(Q)}}var qa=(e,t,n,a,s,c)=>{var l=Pt(t,n);s=ne(a,s),be([],[e],function(d){d=d[0];var h=`constructor ${d.name}`;if(d.registeredClass.constructor_body===void 0&&(d.registeredClass.constructor_body=[]),d.registeredClass.constructor_body[t-1]!==void 0)throw new Ee(`Cannot register multiple constructors with identical number of parameters (${t-1}) for class '${d.name}'! Overload resolution is currently only performed using the parameter count, not actual type info!`);return d.registeredClass.constructor_body[t-1]=()=>{nt(`Cannot construct ${d.name} due to unbound types`,l)},be([],l,y=>(y.splice(1,0,null),d.registeredClass.constructor_body[t-1]=Tt(h,y,null,s,c),[])),[]})},Ya=(e,t,n,a,s,c,l,d,h)=>{var y=Pt(n,a);t=K(t),c=ne(s,c),be([],[e],function(C){C=C[0];var T=`${C.name}.${t}`;t.startsWith("@@")&&(t=Symbol[t.substring(2)]),d&&C.registeredClass.pureVirtualFunctions.push(t);function O(){nt(`Cannot call ${T} due to unbound types`,y)}var x=C.registeredClass.instancePrototype,V=x[t];return V===void 0||V.overloadTable===void 0&&V.className!==C.name&&V.argCount===n-2?(O.argCount=n-2,O.className=C.name,x[t]=O):(Tr(x,t,T),x[t].overloadTable[n-2]=O),be([],y,function(J){var B=Tt(T,J,C,c,l);return x[t].overloadTable===void 0?(B.argCount=n-2,x[t]=B):x[t].overloadTable[n-2]=B,[]}),[]})};function Ja(){Object.assign(xr.prototype,{get(e){return this.allocated[e]},has(e){return this.allocated[e]!==void 0},allocate(e){var t=this.freelist.pop()||this.allocated.length;return this.allocated[t]=e,t},free(e){this.allocated[e]=void 0,this.freelist.push(e)}})}function xr(){this.allocated=[void 0],this.freelist=[]}var re=new xr,Fr=e=>{e>=re.reserved&&--re.get(e).refcount===0&&re.free(e)},Qa=()=>{for(var e=0,t=re.reserved;t<re.allocated.length;++t)re.allocated[t]!==void 0&&++e;return e},Za=()=>{re.allocated.push({value:void 0},{value:null},{value:!0},{value:!1}),re.reserved=re.allocated.length,o.count_emval_handles=Qa},ye={toValue:e=>(e||F("Cannot use deleted val. handle = "+e),re.get(e).value),toHandle:e=>{switch(e){case void 0:return 1;case null:return 2;case!0:return 3;case!1:return 4;default:return re.allocate({refcount:1,value:e})}}},Ka=(e,t)=>{t=K(t),de(e,{name:t,fromWireType:n=>{var a=ye.toValue(n);return Fr(n),a},toWireType:(n,a)=>ye.toHandle(a),argPackAdvance:fe,readValueFromPointer:bt,destructorFunction:null})},Et=e=>{if(e===null)return"null";var t=typeof e;return t==="object"||t==="array"||t==="function"?e.toString():""+e},Xa=(e,t)=>{switch(t){case 4:return function(n){return this.fromWireType($e[n>>2])};case 8:return function(n){return this.fromWireType(Se[n>>3])};default:throw new TypeError(`invalid float width (${t}): ${e}`)}},eo=(e,t,n)=>{t=K(t),de(e,{name:t,fromWireType:a=>a,toWireType:(a,s)=>s,argPackAdvance:fe,readValueFromPointer:Xa(t,n),destructorFunction:null})},to=(e,t,n,a,s,c,l)=>{var d=Pt(t,n);e=K(e),s=ne(a,s),Er(e,function(){nt(`Cannot call ${e} due to unbound types`,d)},t-1),be([],d,function(h){var y=[h[0],null].concat(h.slice(1));return Mr(e,Tt(e,y,null,s,c),t-1),[]})},ro=(e,t,n)=>{switch(t){case 1:return n?a=>L[a>>0]:a=>E[a>>0];case 2:return n?a=>I[a>>1]:a=>q[a>>1];case 4:return n?a=>N[a>>2]:a=>j[a>>2];default:throw new TypeError(`invalid integer width (${t}): ${e}`)}},no=(e,t,n,a,s)=>{t=K(t);var c=C=>C;if(a===0){var l=32-8*n;c=C=>C<<l>>>l}var d=t.includes("unsigned"),h=(C,T)=>{},y;d?y=function(C,T){return h(T,this.name),T>>>0}:y=function(C,T){return h(T,this.name),T},de(e,{name:t,fromWireType:c,toWireType:y,argPackAdvance:fe,readValueFromPointer:ro(t,n,a!==0),destructorFunction:null})},ao=(e,t,n)=>{var a=[Int8Array,Uint8Array,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array],s=a[t];function c(l){var d=j[l>>2],h=j[l+4>>2];return new s(L.buffer,h,d)}n=K(n),de(e,{name:n,fromWireType:c,argPackAdvance:fe,readValueFromPointer:c},{ignoreDuplicateRegistrations:!0})},kr=(e,t,n,a)=>{if(!(a>0))return 0;for(var s=n,c=n+a-1,l=0;l<e.length;++l){var d=e.charCodeAt(l);if(d>=55296&&d<=57343){var h=e.charCodeAt(++l);d=65536+((d&1023)<<10)|h&1023}if(d<=127){if(n>=c)break;t[n++]=d}else if(d<=2047){if(n+1>=c)break;t[n++]=192|d>>6,t[n++]=128|d&63}else if(d<=65535){if(n+2>=c)break;t[n++]=224|d>>12,t[n++]=128|d>>6&63,t[n++]=128|d&63}else{if(n+3>=c)break;t[n++]=240|d>>18,t[n++]=128|d>>12&63,t[n++]=128|d>>6&63,t[n++]=128|d&63}}return t[n]=0,n-s},oo=(e,t,n)=>kr(e,E,t,n),Ir=e=>{for(var t=0,n=0;n<e.length;++n){var a=e.charCodeAt(n);a<=127?t++:a<=2047?t+=2:a>=55296&&a<=57343?(t+=4,++n):t+=3}return t},jr=typeof TextDecoder<"u"?new TextDecoder("utf8"):void 0,io=(e,t,n)=>{for(var a=t+n,s=t;e[s]&&!(s>=a);)++s;if(s-t>16&&e.buffer&&jr)return jr.decode(e.subarray(t,s));for(var c="";t<s;){var l=e[t++];if(!(l&128)){c+=String.fromCharCode(l);continue}var d=e[t++]&63;if((l&224)==192){c+=String.fromCharCode((l&31)<<6|d);continue}var h=e[t++]&63;if((l&240)==224?l=(l&15)<<12|d<<6|h:l=(l&7)<<18|d<<12|h<<6|e[t++]&63,l<65536)c+=String.fromCharCode(l);else{var y=l-65536;c+=String.fromCharCode(55296|y>>10,56320|y&1023)}}return c},Ot=(e,t)=>e?io(E,e,t):"",so=(e,t)=>{t=K(t);var n=t==="std::string";de(e,{name:t,fromWireType(a){var s=j[a>>2],c=a+4,l;if(n)for(var d=c,h=0;h<=s;++h){var y=c+h;if(h==s||E[y]==0){var C=y-d,T=Ot(d,C);l===void 0?l=T:(l+=String.fromCharCode(0),l+=T),d=y+1}}else{for(var O=new Array(s),h=0;h<s;++h)O[h]=String.fromCharCode(E[c+h]);l=O.join("")}return he(a),l},toWireType(a,s){s instanceof ArrayBuffer&&(s=new Uint8Array(s));var c,l=typeof s=="string";l||s instanceof Uint8Array||s instanceof Uint8ClampedArray||s instanceof Int8Array||F("Cannot pass non-string to std::string"),n&&l?c=Ir(s):c=s.length;var d=Dt(4+c+1),h=d+4;if(j[d>>2]=c,n&&l)oo(s,h,c+1);else if(l)for(var y=0;y<c;++y){var C=s.charCodeAt(y);C>255&&(he(h),F("String has UTF-16 code units that do not fit in 8 bits")),E[h+y]=C}else for(var y=0;y<c;++y)E[h+y]=s[y];return a!==null&&a.push(he,d),d},argPackAdvance:fe,readValueFromPointer:Or,destructorFunction(a){he(a)}})},Ur=typeof TextDecoder<"u"?new TextDecoder("utf-16le"):void 0,co=(e,t)=>{for(var n=e,a=n>>1,s=a+t/2;!(a>=s)&&q[a];)++a;if(n=a<<1,n-e>32&&Ur)return Ur.decode(E.subarray(e,n));for(var c="",l=0;!(l>=t/2);++l){var d=I[e+l*2>>1];if(d==0)break;c+=String.fromCharCode(d)}return c},uo=(e,t,n)=>{if(n===void 0&&(n=2147483647),n<2)return 0;n-=2;for(var a=t,s=n<e.length*2?n/2:e.length,c=0;c<s;++c){var l=e.charCodeAt(c);I[t>>1]=l,t+=2}return I[t>>1]=0,t-a},lo=e=>e.length*2,fo=(e,t)=>{for(var n=0,a="";!(n>=t/4);){var s=N[e+n*4>>2];if(s==0)break;if(++n,s>=65536){var c=s-65536;a+=String.fromCharCode(55296|c>>10,56320|c&1023)}else a+=String.fromCharCode(s)}return a},ho=(e,t,n)=>{if(n===void 0&&(n=2147483647),n<4)return 0;for(var a=t,s=a+n-4,c=0;c<e.length;++c){var l=e.charCodeAt(c);if(l>=55296&&l<=57343){var d=e.charCodeAt(++c);l=65536+((l&1023)<<10)|d&1023}if(N[t>>2]=l,t+=4,t+4>s)break}return N[t>>2]=0,t-a},po=e=>{for(var t=0,n=0;n<e.length;++n){var a=e.charCodeAt(n);a>=55296&&a<=57343&&++n,t+=4}return t},mo=(e,t,n)=>{n=K(n);var a,s,c,l,d;t===2?(a=co,s=uo,l=lo,c=()=>q,d=1):t===4&&(a=fo,s=ho,l=po,c=()=>j,d=2),de(e,{name:n,fromWireType:h=>{for(var y=j[h>>2],C=c(),T,O=h+4,x=0;x<=y;++x){var V=h+4+x*t;if(x==y||C[V>>d]==0){var J=V-O,B=a(O,J);T===void 0?T=B:(T+=String.fromCharCode(0),T+=B),O=V+t}}return he(h),T},toWireType:(h,y)=>{typeof y!="string"&&F(`Cannot pass non-string to C++ string type ${n}`);var C=l(y),T=Dt(4+C+t);return j[T>>2]=C>>d,s(y,T+4,C+t),h!==null&&h.push(he,T),T},argPackAdvance:fe,readValueFromPointer:bt,destructorFunction(h){he(h)}})},vo=(e,t,n,a,s,c)=>{Qe[e]={name:K(t),rawConstructor:ne(n,a),rawDestructor:ne(s,c),fields:[]}},yo=(e,t,n,a,s,c,l,d,h,y)=>{Qe[e].fields.push({fieldName:K(t),getterReturnType:n,getter:ne(a,s),getterContext:c,setterArgumentType:l,setter:ne(d,h),setterContext:y})},go=(e,t)=>{t=K(t),de(e,{isVoid:!0,name:t,argPackAdvance:0,fromWireType:()=>{},toWireType:(n,a)=>{}})},wo={},bo=e=>{var t=wo[e];return t===void 0?K(e):t},Lr=()=>{if(typeof globalThis=="object")return globalThis;function e(t){t.$$$embind_global$$$=t;var n=typeof $$$embind_global$$$=="object"&&t.$$$embind_global$$$==t;return n||delete t.$$$embind_global$$$,n}if(typeof $$$embind_global$$$=="object"||(typeof global=="object"&&e(global)?$$$embind_global$$$=global:typeof self=="object"&&e(self)&&($$$embind_global$$$=self),typeof $$$embind_global$$$=="object"))return $$$embind_global$$$;throw Error("unable to get global object.")},Co=e=>e===0?ye.toHandle(Lr()):(e=bo(e),ye.toHandle(Lr()[e])),_o=e=>{e>4&&(re.get(e).refcount+=1)},Hr=(e,t)=>{var n=we[e];return n===void 0&&F(t+" has unknown type "+Rr(e)),n},$o=e=>{var t=new Array(e+1);return function(n,a,s){t[0]=n;for(var c=0;c<e;++c){var l=Hr(j[a+c*4>>2],"parameter "+c);t[c+1]=l.readValueFromPointer(s),s+=l.argPackAdvance}var d=new(n.bind.apply(n,t));return ye.toHandle(d)}},Wr={},So=(e,t,n,a)=>{e=ye.toValue(e);var s=Wr[t];return s||(s=$o(t),Wr[t]=s),s(e,n,a)},Po=(e,t)=>{e=Hr(e,"_emval_take_value");var n=e.readValueFromPointer(t);return ye.toHandle(n)},To=()=>{Pe("")},Eo=(e,t,n)=>E.copyWithin(e,t,t+n),Oo=()=>2147483648,Mo=e=>{var t=U.buffer,n=(e-t.byteLength+65535)/65536;try{return U.grow(n),Me(),1}catch(a){}},Do=e=>{var t=E.length;e>>>=0;var n=Oo();if(e>n)return!1;for(var a=(h,y)=>h+(y-h%y)%y,s=1;s<=4;s*=2){var c=t*(1+.2/s);c=Math.min(c,e+100663296);var l=Math.min(n,a(Math.max(e,c),65536)),d=Mo(l);if(d)return!0}return!1},Mt={},Ao=()=>m||"./this.program",je=()=>{if(!je.strings){var e=(typeof navigator=="object"&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",t={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:e,_:Ao()};for(var n in Mt)Mt[n]===void 0?delete t[n]:t[n]=Mt[n];var a=[];for(var n in t)a.push(`${n}=${t[n]}`);je.strings=a}return je.strings},Ro=(e,t)=>{for(var n=0;n<e.length;++n)L[t++>>0]=e.charCodeAt(n);L[t>>0]=0},xo=(e,t)=>{var n=0;return je().forEach((a,s)=>{var c=t+n;j[e+s*4>>2]=c,Ro(a,c),n+=a.length+1}),0},Fo=(e,t)=>{var n=je();j[e>>2]=n.length;var a=0;return n.forEach(s=>a+=s.length+1),j[t>>2]=a,0},ko=e=>e,at=e=>e%4===0&&(e%100!==0||e%400===0),Io=(e,t)=>{for(var n=0,a=0;a<=t;n+=e[a++]);return n},Vr=[31,29,31,30,31,30,31,31,30,31,30,31],Br=[31,28,31,30,31,30,31,31,30,31,30,31],jo=(e,t)=>{for(var n=new Date(e.getTime());t>0;){var a=at(n.getFullYear()),s=n.getMonth(),c=(a?Vr:Br)[s];if(t>c-n.getDate())t-=c-n.getDate()+1,n.setDate(1),s<11?n.setMonth(s+1):(n.setMonth(0),n.setFullYear(n.getFullYear()+1));else return n.setDate(n.getDate()+t),n}return n};function Uo(e,t,n){var a=n>0?n:Ir(e)+1,s=new Array(a),c=kr(e,s,0,s.length);return t&&(s.length=c),s}var Lo=(e,t)=>{L.set(e,t)},Ho=(e,t,n,a)=>{var s=j[a+40>>2],c={tm_sec:N[a>>2],tm_min:N[a+4>>2],tm_hour:N[a+8>>2],tm_mday:N[a+12>>2],tm_mon:N[a+16>>2],tm_year:N[a+20>>2],tm_wday:N[a+24>>2],tm_yday:N[a+28>>2],tm_isdst:N[a+32>>2],tm_gmtoff:N[a+36>>2],tm_zone:s?Ot(s):""},l=Ot(n),d={"%c":"%a %b %d %H:%M:%S %Y","%D":"%m/%d/%y","%F":"%Y-%m-%d","%h":"%b","%r":"%I:%M:%S %p","%R":"%H:%M","%T":"%H:%M:%S","%x":"%m/%d/%y","%X":"%H:%M:%S","%Ec":"%c","%EC":"%C","%Ex":"%m/%d/%y","%EX":"%H:%M:%S","%Ey":"%y","%EY":"%Y","%Od":"%d","%Oe":"%e","%OH":"%H","%OI":"%I","%Om":"%m","%OM":"%M","%OS":"%S","%Ou":"%u","%OU":"%U","%OV":"%V","%Ow":"%w","%OW":"%W","%Oy":"%y"};for(var h in d)l=l.replace(new RegExp(h,"g"),d[h]);var y=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],C=["January","February","March","April","May","June","July","August","September","October","November","December"];function T(g,P,G){for(var Y=typeof g=="number"?g.toString():g||"";Y.length<P;)Y=G[0]+Y;return Y}function O(g,P){return T(g,P,"0")}function x(g,P){function G(Ce){return Ce<0?-1:Ce>0?1:0}var Y;return(Y=G(g.getFullYear()-P.getFullYear()))===0&&(Y=G(g.getMonth()-P.getMonth()))===0&&(Y=G(g.getDate()-P.getDate())),Y}function V(g){switch(g.getDay()){case 0:return new Date(g.getFullYear()-1,11,29);case 1:return g;case 2:return new Date(g.getFullYear(),0,3);case 3:return new Date(g.getFullYear(),0,2);case 4:return new Date(g.getFullYear(),0,1);case 5:return new Date(g.getFullYear()-1,11,31);case 6:return new Date(g.getFullYear()-1,11,30)}}function J(g){var P=jo(new Date(g.tm_year+1900,0,1),g.tm_yday),G=new Date(P.getFullYear(),0,4),Y=new Date(P.getFullYear()+1,0,4),Ce=V(G),it=V(Y);return x(Ce,P)<=0?x(it,P)<=0?P.getFullYear()+1:P.getFullYear():P.getFullYear()-1}var B={"%a":g=>y[g.tm_wday].substring(0,3),"%A":g=>y[g.tm_wday],"%b":g=>C[g.tm_mon].substring(0,3),"%B":g=>C[g.tm_mon],"%C":g=>{var P=g.tm_year+1900;return O(P/100|0,2)},"%d":g=>O(g.tm_mday,2),"%e":g=>T(g.tm_mday,2," "),"%g":g=>J(g).toString().substring(2),"%G":g=>J(g),"%H":g=>O(g.tm_hour,2),"%I":g=>{var P=g.tm_hour;return P==0?P=12:P>12&&(P-=12),O(P,2)},"%j":g=>O(g.tm_mday+Io(at(g.tm_year+1900)?Vr:Br,g.tm_mon-1),3),"%m":g=>O(g.tm_mon+1,2),"%M":g=>O(g.tm_min,2),"%n":()=>`
`,"%p":g=>g.tm_hour>=0&&g.tm_hour<12?"AM":"PM","%S":g=>O(g.tm_sec,2),"%t":()=>"	","%u":g=>g.tm_wday||7,"%U":g=>{var P=g.tm_yday+7-g.tm_wday;return O(Math.floor(P/7),2)},"%V":g=>{var P=Math.floor((g.tm_yday+7-(g.tm_wday+6)%7)/7);if((g.tm_wday+371-g.tm_yday-2)%7<=2&&P++,P){if(P==53){var G=(g.tm_wday+371-g.tm_yday)%7;G!=4&&(G!=3||!at(g.tm_year))&&(P=1)}}else{P=52;var Y=(g.tm_wday+7-g.tm_yday-1)%7;(Y==4||Y==5&&at(g.tm_year%400-1))&&P++}return O(P,2)},"%w":g=>g.tm_wday,"%W":g=>{var P=g.tm_yday+7-(g.tm_wday+6)%7;return O(Math.floor(P/7),2)},"%y":g=>(g.tm_year+1900).toString().substring(2),"%Y":g=>g.tm_year+1900,"%z":g=>{var P=g.tm_gmtoff,G=P>=0;return P=Math.abs(P)/60,P=P/60*100+P%60,(G?"+":"-")+("0000"+P).slice(-4)},"%Z":g=>g.tm_zone,"%%":()=>"%"};l=l.replace(/%%/g,"\0\0");for(var h in B)l.includes(h)&&(l=l.replace(new RegExp(h,"g"),B[h](c)));l=l.replace(/\0\0/g,"%");var Q=Uo(l,!1);return Q.length>t?0:(Lo(Q,e),Q.length-1)},Wo=(e,t,n,a,s)=>Ho(e,t,n,a);gr=o.InternalError=class extends Error{constructor(e){super(e),this.name="InternalError"}},_a(),Ee=o.BindingError=class extends Error{constructor(e){super(e),this.name="BindingError"}},Fa(),Da(),Wa(),Ar=o.UnboundTypeError=Na(Error,"UnboundTypeError"),Ja(),Za();var Vo={q:la,u:da,a:ha,h:pa,l:ma,I:va,P:ya,n:ga,ba:wa,d:fa,oa:ba,Y:Ca,fa:Sa,na:Ga,ma:qa,D:Ya,ea:Ka,W:eo,J:to,w:no,s:ao,V:so,L:mo,Q:vo,pa:yo,ga:go,U:Fr,la:Co,R:_o,ia:So,ka:Po,K:To,da:Eo,ca:Do,$:xo,aa:Fo,H:si,T:vi,B:ui,p:ai,b:Bo,C:ii,ha:di,c:Yo,j:Qo,i:Go,x:ci,O:oi,v:ri,G:hi,N:pi,A:li,F:yi,Z:wi,X:bi,k:Jo,f:qo,e:No,g:zo,M:mi,m:ti,o:Zo,S:Ko,t:ei,ja:ni,y:fi,r:Xo,E:gi,z:ko,_:Wo},z=ua(),he=o._free=e=>(he=o._free=z.sa)(e),Dt=o._malloc=e=>(Dt=o._malloc=z.ta)(e),zr=e=>(zr=z.va)(e);o.__embind_initialize_bindings=()=>(o.__embind_initialize_bindings=z.wa)();var D=(e,t)=>(D=z.xa)(e,t),Ue=e=>(Ue=z.ya)(e),A=()=>(A=z.za)(),R=e=>(R=z.Aa)(e),Nr=e=>(Nr=z.Ba)(e),Gr=e=>(Gr=z.Ca)(e),qr=(e,t,n)=>(qr=z.Da)(e,t,n),Yr=e=>(Yr=z.Ea)(e);o.dynCall_viijii=(e,t,n,a,s,c,l)=>(o.dynCall_viijii=z.Fa)(e,t,n,a,s,c,l);var Jr=o.dynCall_jiii=(e,t,n,a)=>(Jr=o.dynCall_jiii=z.Ga)(e,t,n,a),Qr=o.dynCall_jiiii=(e,t,n,a,s)=>(Qr=o.dynCall_jiiii=z.Ha)(e,t,n,a,s);o.dynCall_iiiiij=(e,t,n,a,s,c,l)=>(o.dynCall_iiiiij=z.Ia)(e,t,n,a,s,c,l),o.dynCall_iiiiijj=(e,t,n,a,s,c,l,d,h)=>(o.dynCall_iiiiijj=z.Ja)(e,t,n,a,s,c,l,d,h),o.dynCall_iiiiiijj=(e,t,n,a,s,c,l,d,h,y)=>(o.dynCall_iiiiiijj=z.Ka)(e,t,n,a,s,c,l,d,h,y);function Bo(e,t){var n=A();try{return k(e)(t)}catch(a){if(R(n),a!==a+0)throw a;D(1,0)}}function zo(e,t,n,a){var s=A();try{k(e)(t,n,a)}catch(c){if(R(s),c!==c+0)throw c;D(1,0)}}function No(e,t,n){var a=A();try{k(e)(t,n)}catch(s){if(R(a),s!==s+0)throw s;D(1,0)}}function Go(e,t,n,a,s){var c=A();try{return k(e)(t,n,a,s)}catch(l){if(R(c),l!==l+0)throw l;D(1,0)}}function qo(e,t){var n=A();try{k(e)(t)}catch(a){if(R(n),a!==a+0)throw a;D(1,0)}}function Yo(e,t,n){var a=A();try{return k(e)(t,n)}catch(s){if(R(a),s!==s+0)throw s;D(1,0)}}function Jo(e){var t=A();try{k(e)()}catch(n){if(R(t),n!==n+0)throw n;D(1,0)}}function Qo(e,t,n,a){var s=A();try{return k(e)(t,n,a)}catch(c){if(R(s),c!==c+0)throw c;D(1,0)}}function Zo(e,t,n,a,s,c){var l=A();try{k(e)(t,n,a,s,c)}catch(d){if(R(l),d!==d+0)throw d;D(1,0)}}function Ko(e,t,n,a,s,c,l){var d=A();try{k(e)(t,n,a,s,c,l)}catch(h){if(R(d),h!==h+0)throw h;D(1,0)}}function Xo(e,t,n,a,s,c,l,d,h,y,C){var T=A();try{k(e)(t,n,a,s,c,l,d,h,y,C)}catch(O){if(R(T),O!==O+0)throw O;D(1,0)}}function ei(e,t,n,a,s,c,l,d){var h=A();try{k(e)(t,n,a,s,c,l,d)}catch(y){if(R(h),y!==y+0)throw y;D(1,0)}}function ti(e,t,n,a,s){var c=A();try{k(e)(t,n,a,s)}catch(l){if(R(c),l!==l+0)throw l;D(1,0)}}function ri(e,t,n,a,s,c,l){var d=A();try{return k(e)(t,n,a,s,c,l)}catch(h){if(R(d),h!==h+0)throw h;D(1,0)}}function ni(e,t,n,a,s,c,l,d,h){var y=A();try{k(e)(t,n,a,s,c,l,d,h)}catch(C){if(R(y),C!==C+0)throw C;D(1,0)}}function ai(e){var t=A();try{return k(e)()}catch(n){if(R(t),n!==n+0)throw n;D(1,0)}}function oi(e,t,n,a,s,c,l){var d=A();try{return k(e)(t,n,a,s,c,l)}catch(h){if(R(d),h!==h+0)throw h;D(1,0)}}function ii(e,t,n,a){var s=A();try{return k(e)(t,n,a)}catch(c){if(R(s),c!==c+0)throw c;D(1,0)}}function si(e,t,n,a){var s=A();try{return k(e)(t,n,a)}catch(c){if(R(s),c!==c+0)throw c;D(1,0)}}function ci(e,t,n,a,s,c){var l=A();try{return k(e)(t,n,a,s,c)}catch(d){if(R(l),d!==d+0)throw d;D(1,0)}}function ui(e,t,n,a,s,c){var l=A();try{return k(e)(t,n,a,s,c)}catch(d){if(R(l),d!==d+0)throw d;D(1,0)}}function li(e,t,n,a,s,c,l,d,h,y){var C=A();try{return k(e)(t,n,a,s,c,l,d,h,y)}catch(T){if(R(C),T!==T+0)throw T;D(1,0)}}function di(e,t,n){var a=A();try{return k(e)(t,n)}catch(s){if(R(a),s!==s+0)throw s;D(1,0)}}function fi(e,t,n,a,s,c,l,d,h,y){var C=A();try{k(e)(t,n,a,s,c,l,d,h,y)}catch(T){if(R(C),T!==T+0)throw T;D(1,0)}}function hi(e,t,n,a,s,c,l,d){var h=A();try{return k(e)(t,n,a,s,c,l,d)}catch(y){if(R(h),y!==y+0)throw y;D(1,0)}}function pi(e,t,n,a,s,c,l,d,h){var y=A();try{return k(e)(t,n,a,s,c,l,d,h)}catch(C){if(R(y),C!==C+0)throw C;D(1,0)}}function mi(e,t,n,a,s,c,l){var d=A();try{k(e)(t,n,a,s,c,l)}catch(h){if(R(d),h!==h+0)throw h;D(1,0)}}function vi(e,t,n,a){var s=A();try{return k(e)(t,n,a)}catch(c){if(R(s),c!==c+0)throw c;D(1,0)}}function yi(e,t,n,a,s,c,l,d,h,y,C,T){var O=A();try{return k(e)(t,n,a,s,c,l,d,h,y,C,T)}catch(x){if(R(O),x!==x+0)throw x;D(1,0)}}function gi(e,t,n,a,s,c,l,d,h,y,C,T,O,x,V,J){var B=A();try{k(e)(t,n,a,s,c,l,d,h,y,C,T,O,x,V,J)}catch(Q){if(R(B),Q!==Q+0)throw Q;D(1,0)}}function wi(e,t,n,a){var s=A();try{return Jr(e,t,n,a)}catch(c){if(R(s),c!==c+0)throw c;D(1,0)}}function bi(e,t,n,a,s){var c=A();try{return Qr(e,t,n,a,s)}catch(l){if(R(c),l!==l+0)throw l;D(1,0)}}var ot;te=function e(){ot||Zr(),ot||(te=e)};function Zr(){if(ce>0||(ft(),ce>0))return;function e(){ot||(ot=!0,o.calledRun=!0,!W&&(ht(),u(o),o.onRuntimeInitialized&&o.onRuntimeInitialized(),pt()))}o.setStatus?(o.setStatus("Running..."),setTimeout(function(){setTimeout(function(){o.setStatus("")},1),e()},1)):e()}if(o.preInit)for(typeof o.preInit=="function"&&(o.preInit=[o.preInit]);o.preInit.length>0;)o.preInit.pop()();return Zr(),i.ready}})();function yn(r){return st(ct,r)}async function gn(r,{tryHarder:i=Z.tryHarder,formats:o=Z.formats,maxSymbols:u=Z.maxSymbols}=Z){return mn(r,{tryHarder:i,formats:o,maxSymbols:u},ct)}async function wn(r,{tryHarder:i=Z.tryHarder,formats:o=Z.formats,maxSymbols:u=Z.maxSymbols}=Z){return vn(r,{tryHarder:i,formats:o,maxSymbols:u},ct)}const ut=new Map([["aztec","Aztec"],["code_128","Code128"],["code_39","Code39"],["code_93","Code93"],["codabar","Codabar"],["data_matrix","DataMatrix"],["ean_13","EAN-13"],["ean_8","EAN-8"],["itf","ITF"],["pdf417","PDF417"],["qr_code","QRCode"],["upc_a","UPC-A"],["upc_e","UPC-E"]]);function bn(r){for(const[i,o]of ut)if(r===o)return i;return"unknown"}var Oe;class Le extends EventTarget{constructor(i={}){var o;super(),Kr(this,Oe,void 0);try{const u=(o=i==null?void 0:i.formats)==null?void 0:o.filter(f=>f!=="unknown");if((u==null?void 0:u.length)===0)throw new TypeError("Hint option provided, but is empty.");u==null||u.forEach(f=>{if(!xt.includes(f))throw new TypeError(`Failed to read the 'formats' property from 'BarcodeDetectorOptions': The provided value '${f}' is not a valid enum value of type BarcodeFormat.`)}),Xr(this,Oe,u!=null?u:[]),yn().then(f=>{this.dispatchEvent(new CustomEvent("load",{detail:f}))}).catch(f=>{this.dispatchEvent(new CustomEvent("error",{detail:f}))})}catch(u){throw Bt(u,"Failed to construct 'BarcodeDetector'")}}static async getSupportedFormats(){return xt.filter(i=>i!=="unknown")}async detect(i){try{const o=await on(i);if(o===null)return[];let u;try{Wt(o)?u=await gn(o,{tryHarder:!0,formats:Rt(this,Oe).map(f=>ut.get(f))}):u=await wn(o,{tryHarder:!0,formats:Rt(this,Oe).map(f=>ut.get(f))})}catch(f){throw console.error(f),new DOMException("Barcode detection service unavailable.","NotSupportedError")}return u.map(f=>{const{topLeft:{x:p,y:m},topRight:{x:w,y:b},bottomLeft:{x:v,y:_},bottomRight:{x:S,y:$}}=f.position,H=Math.min(p,w,v,S),U=Math.min(m,b,_,$),W=Math.max(p,w,v,S),L=Math.max(m,b,_,$);return{boundingBox:new DOMRectReadOnly(H,U,W-H,L-U),rawValue:new TextDecoder().decode(f.bytes),format:bn(f.format),cornerPoints:[{x:p,y:m},{x:w,y:b},{x:S,y:$},{x:v,y:_}]}})}catch(o){throw Bt(o,"Failed to execute 'detect' on 'BarcodeDetector'")}}}Oe=new WeakMap;const Jt=(r,i,o="error")=>{let u,f;const p=new Promise((m,w)=>{u=m,f=w,r.addEventListener(i,u),r.addEventListener(o,f)});return p.finally(()=>{r.removeEventListener(i,u),r.removeEventListener(o,f)}),p},Qt=r=>new Promise(i=>setTimeout(i,r));class Cn extends Error{constructor(){super("can't process cross-origin image"),this.name="DropImageFetchError"}}class Zt extends Error{constructor(){super("this browser has no Stream API support"),this.name="StreamApiNotSupportedError"}}class _n extends Error{constructor(){super("camera access is only permitted in secure context. Use HTTPS or localhost rather than HTTP."),this.name="InsecureContextError"}}class $n extends Error{constructor(){super("Loading camera stream timed out after 3 seconds. If you are on iOS in PWA mode, this is a known issue (see https://github.com/gruhn/vue-qrcode-reader/issues/298)"),this.name="StreamLoadTimeoutError"}}let lt;const Sn=r=>{lt=new Le({formats:r})},Pn=async(r,{detectHandler:i,locateHandler:o,minDelay:u,formats:f})=>{lt=new Le({formats:f});const p=m=>async w=>{if(r.readyState>1){const{lastScanned:b,contentBefore:v,lastScanHadContent:_}=m;if(w-b<u)window.requestAnimationFrame(p(m));else{const S=await lt.detect(r),$=S.some(W=>!v.includes(W.rawValue));$&&i(S);const H=S.length>0;H&&o(S),!H&&_&&o(S);const U={lastScanned:w,lastScanHadContent:H,contentBefore:$?S.map(W=>W.rawValue):v};window.requestAnimationFrame(p(U))}}};p({lastScanned:performance.now(),contentBefore:[],lastScanHadContent:!1})(performance.now())},Tn=async r=>{if(r.startsWith("http")&&r.includes(location.host)===!1)throw new Cn;const i=document.createElement("img");return i.src=r,await Jt(i,"load"),i},Kt=async(r,i=["qr_code"])=>await new Le({formats:i}).detect(r),En=async(r,i=["qr_code"])=>{const o=new Le({formats:i}),u=await Tn(r);return await o.detect(u)};var Xt={},X={};Object.defineProperty(X,"__esModule",{value:!0}),X.compactObject=nr,X.deprecated=In;var On=X.detectBrowser=jn;X.disableLog=xn,X.disableWarnings=Fn,X.extractVersion=He,X.filterStats=Un,X.log=kn,X.walkStats=We,X.wrapPeerConnectionEvent=Rn;function Mn(r,i,o){return i=Dn(i),i in r?Object.defineProperty(r,i,{value:o,enumerable:!0,configurable:!0,writable:!0}):r[i]=o,r}function Dn(r){var i=An(r,"string");return pe(i)==="symbol"?i:String(i)}function An(r,i){if(pe(r)!=="object"||r===null)return r;var o=r[Symbol.toPrimitive];if(o!==void 0){var u=o.call(r,i||"default");if(pe(u)!=="object")return u;throw new TypeError("@@toPrimitive must return a primitive value.")}return(i==="string"?String:Number)(r)}function pe(r){"@babel/helpers - typeof";return pe=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(i){return typeof i}:function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},pe(r)}var er=!0,tr=!0;function He(r,i,o){var u=r.match(i);return u&&u.length>=o&&parseInt(u[o],10)}function Rn(r,i,o){if(r.RTCPeerConnection){var u=r.RTCPeerConnection.prototype,f=u.addEventListener;u.addEventListener=function(m,w){if(m!==i)return f.apply(this,arguments);var b=function(_){var S=o(_);S&&(w.handleEvent?w.handleEvent(S):w(S))};return this._eventMap=this._eventMap||{},this._eventMap[i]||(this._eventMap[i]=new Map),this._eventMap[i].set(w,b),f.apply(this,[m,b])};var p=u.removeEventListener;u.removeEventListener=function(m,w){if(m!==i||!this._eventMap||!this._eventMap[i])return p.apply(this,arguments);if(!this._eventMap[i].has(w))return p.apply(this,arguments);var b=this._eventMap[i].get(w);return this._eventMap[i].delete(w),this._eventMap[i].size===0&&delete this._eventMap[i],Object.keys(this._eventMap).length===0&&delete this._eventMap,p.apply(this,[m,b])},Object.defineProperty(u,"on"+i,{get:function(){return this["_on"+i]},set:function(w){this["_on"+i]&&(this.removeEventListener(i,this["_on"+i]),delete this["_on"+i]),w&&this.addEventListener(i,this["_on"+i]=w)},enumerable:!0,configurable:!0})}}function xn(r){return typeof r!="boolean"?new Error("Argument type: "+pe(r)+". Please use a boolean."):(er=r,r?"adapter.js logging disabled":"adapter.js logging enabled")}function Fn(r){return typeof r!="boolean"?new Error("Argument type: "+pe(r)+". Please use a boolean."):(tr=!r,"adapter.js deprecation warnings "+(r?"disabled":"enabled"))}function kn(){if((typeof window>"u"?"undefined":pe(window))==="object"){if(er)return;typeof console<"u"&&typeof console.log=="function"&&console.log.apply(console,arguments)}}function In(r,i){tr&&console.warn(r+" is deprecated, please use "+i+" instead.")}function jn(r){var i={browser:null,version:null};if(typeof r>"u"||!r.navigator||!r.navigator.userAgent)return i.browser="Not a browser.",i;var o=r.navigator;if(o.mozGetUserMedia)i.browser="firefox",i.version=He(o.userAgent,/Firefox\/(\d+)\./,1);else if(o.webkitGetUserMedia||r.isSecureContext===!1&&r.webkitRTCPeerConnection)i.browser="chrome",i.version=He(o.userAgent,/Chrom(e|ium)\/(\d+)\./,2);else if(r.RTCPeerConnection&&o.userAgent.match(/AppleWebKit\/(\d+)\./))i.browser="safari",i.version=He(o.userAgent,/AppleWebKit\/(\d+)\./,1),i.supportsUnifiedPlan=r.RTCRtpTransceiver&&"currentDirection"in r.RTCRtpTransceiver.prototype;else return i.browser="Not a supported browser.",i;return i}function rr(r){return Object.prototype.toString.call(r)==="[object Object]"}function nr(r){return rr(r)?Object.keys(r).reduce(function(i,o){var u=rr(r[o]),f=u?nr(r[o]):r[o],p=u&&!Object.keys(f).length;return f===void 0||p?i:Object.assign(i,Mn({},o,f))},{}):r}function We(r,i,o){!i||o.has(i.id)||(o.set(i.id,i),Object.keys(i).forEach(function(u){u.endsWith("Id")?We(r,r.get(i[u]),o):u.endsWith("Ids")&&i[u].forEach(function(f){We(r,r.get(f),o)})}))}function Un(r,i,o){var u=o?"outbound-rtp":"inbound-rtp",f=new Map;if(i===null)return f;var p=[];return r.forEach(function(m){m.type==="track"&&m.trackIdentifier===i.id&&p.push(m)}),p.forEach(function(m){r.forEach(function(w){w.type===u&&w.trackId===m.id&&We(r,w,f)})}),f}Object.defineProperty(Xt,"__esModule",{value:!0});var Ln=Xt.shimGetUserMedia=Vn,Hn=Wn(X);function ar(r){if(typeof WeakMap!="function")return null;var i=new WeakMap,o=new WeakMap;return(ar=function(f){return f?o:i})(r)}function Wn(r,i){if(!i&&r&&r.__esModule)return r;if(r===null||me(r)!=="object"&&typeof r!="function")return{default:r};var o=ar(i);if(o&&o.has(r))return o.get(r);var u={},f=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var p in r)if(p!=="default"&&Object.prototype.hasOwnProperty.call(r,p)){var m=f?Object.getOwnPropertyDescriptor(r,p):null;m&&(m.get||m.set)?Object.defineProperty(u,p,m):u[p]=r[p]}return u.default=r,o&&o.set(r,u),u}function me(r){"@babel/helpers - typeof";return me=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(i){return typeof i}:function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},me(r)}var or=Hn.log;function Vn(r,i){var o=r&&r.navigator;if(o.mediaDevices){var u=function(v){if(me(v)!=="object"||v.mandatory||v.optional)return v;var _={};return Object.keys(v).forEach(function(S){if(!(S==="require"||S==="advanced"||S==="mediaSource")){var $=me(v[S])==="object"?v[S]:{ideal:v[S]};$.exact!==void 0&&typeof $.exact=="number"&&($.min=$.max=$.exact);var H=function(L,E){return L?L+E.charAt(0).toUpperCase()+E.slice(1):E==="deviceId"?"sourceId":E};if($.ideal!==void 0){_.optional=_.optional||[];var U={};typeof $.ideal=="number"?(U[H("min",S)]=$.ideal,_.optional.push(U),U={},U[H("max",S)]=$.ideal,_.optional.push(U)):(U[H("",S)]=$.ideal,_.optional.push(U))}$.exact!==void 0&&typeof $.exact!="number"?(_.mandatory=_.mandatory||{},_.mandatory[H("",S)]=$.exact):["min","max"].forEach(function(W){$[W]!==void 0&&(_.mandatory=_.mandatory||{},_.mandatory[H(W,S)]=$[W])})}}),v.advanced&&(_.optional=(_.optional||[]).concat(v.advanced)),_},f=function(v,_){if(i.version>=61)return _(v);if(v=JSON.parse(JSON.stringify(v)),v&&me(v.audio)==="object"){var S=function(L,E,I){E in L&&!(I in L)&&(L[I]=L[E],delete L[E])};v=JSON.parse(JSON.stringify(v)),S(v.audio,"autoGainControl","googAutoGainControl"),S(v.audio,"noiseSuppression","googNoiseSuppression"),v.audio=u(v.audio)}if(v&&me(v.video)==="object"){var $=v.video.facingMode;$=$&&(me($)==="object"?$:{ideal:$});var H=i.version<66;if($&&($.exact==="user"||$.exact==="environment"||$.ideal==="user"||$.ideal==="environment")&&!(o.mediaDevices.getSupportedConstraints&&o.mediaDevices.getSupportedConstraints().facingMode&&!H)){delete v.video.facingMode;var U;if($.exact==="environment"||$.ideal==="environment"?U=["back","rear"]:($.exact==="user"||$.ideal==="user")&&(U=["front"]),U)return o.mediaDevices.enumerateDevices().then(function(W){W=W.filter(function(E){return E.kind==="videoinput"});var L=W.find(function(E){return U.some(function(I){return E.label.toLowerCase().includes(I)})});return!L&&W.length&&U.includes("back")&&(L=W[W.length-1]),L&&(v.video.deviceId=$.exact?{exact:L.deviceId}:{ideal:L.deviceId}),v.video=u(v.video),or("chrome: "+JSON.stringify(v)),_(v)})}v.video=u(v.video)}return or("chrome: "+JSON.stringify(v)),_(v)},p=function(v){return i.version>=64?v:{name:{PermissionDeniedError:"NotAllowedError",PermissionDismissedError:"NotAllowedError",InvalidStateError:"NotAllowedError",DevicesNotFoundError:"NotFoundError",ConstraintNotSatisfiedError:"OverconstrainedError",TrackStartError:"NotReadableError",MediaDeviceFailedDueToShutdown:"NotAllowedError",MediaDeviceKillSwitchOn:"NotAllowedError",TabCaptureError:"AbortError",ScreenCaptureError:"AbortError",DeviceCaptureError:"AbortError"}[v.name]||v.name,message:v.message,constraint:v.constraint||v.constraintName,toString:function(){return this.name+(this.message&&": ")+this.message}}},m=function(v,_,S){f(v,function($){o.webkitGetUserMedia($,_,function(H){S&&S(p(H))})})};if(o.getUserMedia=m.bind(o),o.mediaDevices.getUserMedia){var w=o.mediaDevices.getUserMedia.bind(o.mediaDevices);o.mediaDevices.getUserMedia=function(b){return f(b,function(v){return w(v).then(function(_){if(v.audio&&!_.getAudioTracks().length||v.video&&!_.getVideoTracks().length)throw _.getTracks().forEach(function(S){S.stop()}),new DOMException("","NotFoundError");return _},function(_){return Promise.reject(p(_))})})}}}}var ir={};Object.defineProperty(ir,"__esModule",{value:!0});var Bn=ir.shimGetUserMedia=Gn,zn=Nn(X);function sr(r){if(typeof WeakMap!="function")return null;var i=new WeakMap,o=new WeakMap;return(sr=function(f){return f?o:i})(r)}function Nn(r,i){if(!i&&r&&r.__esModule)return r;if(r===null||_e(r)!=="object"&&typeof r!="function")return{default:r};var o=sr(i);if(o&&o.has(r))return o.get(r);var u={},f=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var p in r)if(p!=="default"&&Object.prototype.hasOwnProperty.call(r,p)){var m=f?Object.getOwnPropertyDescriptor(r,p):null;m&&(m.get||m.set)?Object.defineProperty(u,p,m):u[p]=r[p]}return u.default=r,o&&o.set(r,u),u}function _e(r){"@babel/helpers - typeof";return _e=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(i){return typeof i}:function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},_e(r)}function Gn(r,i){var o=r&&r.navigator,u=r&&r.MediaStreamTrack;if(o.getUserMedia=function(b,v,_){zn.deprecated("navigator.getUserMedia","navigator.mediaDevices.getUserMedia"),o.mediaDevices.getUserMedia(b).then(v,_)},!(i.version>55&&"autoGainControl"in o.mediaDevices.getSupportedConstraints())){var f=function(v,_,S){_ in v&&!(S in v)&&(v[S]=v[_],delete v[_])},p=o.mediaDevices.getUserMedia.bind(o.mediaDevices);if(o.mediaDevices.getUserMedia=function(b){return _e(b)==="object"&&_e(b.audio)==="object"&&(b=JSON.parse(JSON.stringify(b)),f(b.audio,"autoGainControl","mozAutoGainControl"),f(b.audio,"noiseSuppression","mozNoiseSuppression")),p(b)},u&&u.prototype.getSettings){var m=u.prototype.getSettings;u.prototype.getSettings=function(){var b=m.apply(this,arguments);return f(b,"mozAutoGainControl","autoGainControl"),f(b,"mozNoiseSuppression","noiseSuppression"),b}}if(u&&u.prototype.applyConstraints){var w=u.prototype.applyConstraints;u.prototype.applyConstraints=function(b){return this.kind==="audio"&&_e(b)==="object"&&(b=JSON.parse(JSON.stringify(b)),f(b,"autoGainControl","mozAutoGainControl"),f(b,"noiseSuppression","mozNoiseSuppression")),w.apply(this,[b])}}}}var ae={};Object.defineProperty(ae,"__esModule",{value:!0}),ae.shimAudioContext=ra,ae.shimCallbacksAPI=Zn,ae.shimConstraints=lr,ae.shimCreateOfferLegacy=ta;var qn=ae.shimGetUserMedia=Kn;ae.shimLocalStreamsAPI=Jn,ae.shimRTCIceServerUrls=Xn,ae.shimRemoteStreamsAPI=Qn,ae.shimTrackEventTransceiver=ea;var cr=Yn(X);function ur(r){if(typeof WeakMap!="function")return null;var i=new WeakMap,o=new WeakMap;return(ur=function(f){return f?o:i})(r)}function Yn(r,i){if(!i&&r&&r.__esModule)return r;if(r===null||ve(r)!=="object"&&typeof r!="function")return{default:r};var o=ur(i);if(o&&o.has(r))return o.get(r);var u={},f=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var p in r)if(p!=="default"&&Object.prototype.hasOwnProperty.call(r,p)){var m=f?Object.getOwnPropertyDescriptor(r,p):null;m&&(m.get||m.set)?Object.defineProperty(u,p,m):u[p]=r[p]}return u.default=r,o&&o.set(r,u),u}function ve(r){"@babel/helpers - typeof";return ve=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(i){return typeof i}:function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},ve(r)}function Jn(r){if(!(ve(r)!=="object"||!r.RTCPeerConnection)){if("getLocalStreams"in r.RTCPeerConnection.prototype||(r.RTCPeerConnection.prototype.getLocalStreams=function(){return this._localStreams||(this._localStreams=[]),this._localStreams}),!("addStream"in r.RTCPeerConnection.prototype)){var i=r.RTCPeerConnection.prototype.addTrack;r.RTCPeerConnection.prototype.addStream=function(u){var f=this;this._localStreams||(this._localStreams=[]),this._localStreams.includes(u)||this._localStreams.push(u),u.getAudioTracks().forEach(function(p){return i.call(f,p,u)}),u.getVideoTracks().forEach(function(p){return i.call(f,p,u)})},r.RTCPeerConnection.prototype.addTrack=function(u){for(var f=this,p=arguments.length,m=new Array(p>1?p-1:0),w=1;w<p;w++)m[w-1]=arguments[w];return m&&m.forEach(function(b){f._localStreams?f._localStreams.includes(b)||f._localStreams.push(b):f._localStreams=[b]}),i.apply(this,arguments)}}"removeStream"in r.RTCPeerConnection.prototype||(r.RTCPeerConnection.prototype.removeStream=function(u){var f=this;this._localStreams||(this._localStreams=[]);var p=this._localStreams.indexOf(u);if(p!==-1){this._localStreams.splice(p,1);var m=u.getTracks();this.getSenders().forEach(function(w){m.includes(w.track)&&f.removeTrack(w)})}})}}function Qn(r){if(!(ve(r)!=="object"||!r.RTCPeerConnection)&&("getRemoteStreams"in r.RTCPeerConnection.prototype||(r.RTCPeerConnection.prototype.getRemoteStreams=function(){return this._remoteStreams?this._remoteStreams:[]}),!("onaddstream"in r.RTCPeerConnection.prototype))){Object.defineProperty(r.RTCPeerConnection.prototype,"onaddstream",{get:function(){return this._onaddstream},set:function(u){var f=this;this._onaddstream&&(this.removeEventListener("addstream",this._onaddstream),this.removeEventListener("track",this._onaddstreampoly)),this.addEventListener("addstream",this._onaddstream=u),this.addEventListener("track",this._onaddstreampoly=function(p){p.streams.forEach(function(m){if(f._remoteStreams||(f._remoteStreams=[]),!f._remoteStreams.includes(m)){f._remoteStreams.push(m);var w=new Event("addstream");w.stream=m,f.dispatchEvent(w)}})})}});var i=r.RTCPeerConnection.prototype.setRemoteDescription;r.RTCPeerConnection.prototype.setRemoteDescription=function(){var u=this;return this._onaddstreampoly||this.addEventListener("track",this._onaddstreampoly=function(f){f.streams.forEach(function(p){if(u._remoteStreams||(u._remoteStreams=[]),!(u._remoteStreams.indexOf(p)>=0)){u._remoteStreams.push(p);var m=new Event("addstream");m.stream=p,u.dispatchEvent(m)}})}),i.apply(u,arguments)}}}function Zn(r){if(!(ve(r)!=="object"||!r.RTCPeerConnection)){var i=r.RTCPeerConnection.prototype,o=i.createOffer,u=i.createAnswer,f=i.setLocalDescription,p=i.setRemoteDescription,m=i.addIceCandidate;i.createOffer=function(v,_){var S=arguments.length>=2?arguments[2]:arguments[0],$=o.apply(this,[S]);return _?($.then(v,_),Promise.resolve()):$},i.createAnswer=function(v,_){var S=arguments.length>=2?arguments[2]:arguments[0],$=u.apply(this,[S]);return _?($.then(v,_),Promise.resolve()):$};var w=function(v,_,S){var $=f.apply(this,[v]);return S?($.then(_,S),Promise.resolve()):$};i.setLocalDescription=w,w=function(v,_,S){var $=p.apply(this,[v]);return S?($.then(_,S),Promise.resolve()):$},i.setRemoteDescription=w,w=function(v,_,S){var $=m.apply(this,[v]);return S?($.then(_,S),Promise.resolve()):$},i.addIceCandidate=w}}function Kn(r){var i=r&&r.navigator;if(i.mediaDevices&&i.mediaDevices.getUserMedia){var o=i.mediaDevices,u=o.getUserMedia.bind(o);i.mediaDevices.getUserMedia=function(f){return u(lr(f))}}!i.getUserMedia&&i.mediaDevices&&i.mediaDevices.getUserMedia&&(i.getUserMedia=(function(p,m,w){i.mediaDevices.getUserMedia(p).then(m,w)}).bind(i))}function lr(r){return r&&r.video!==void 0?Object.assign({},r,{video:cr.compactObject(r.video)}):r}function Xn(r){if(r.RTCPeerConnection){var i=r.RTCPeerConnection;r.RTCPeerConnection=function(u,f){if(u&&u.iceServers){for(var p=[],m=0;m<u.iceServers.length;m++){var w=u.iceServers[m];w.urls===void 0&&w.url?(cr.deprecated("RTCIceServer.url","RTCIceServer.urls"),w=JSON.parse(JSON.stringify(w)),w.urls=w.url,delete w.url,p.push(w)):p.push(u.iceServers[m])}u.iceServers=p}return new i(u,f)},r.RTCPeerConnection.prototype=i.prototype,"generateCertificate"in i&&Object.defineProperty(r.RTCPeerConnection,"generateCertificate",{get:function(){return i.generateCertificate}})}}function ea(r){ve(r)==="object"&&r.RTCTrackEvent&&"receiver"in r.RTCTrackEvent.prototype&&!("transceiver"in r.RTCTrackEvent.prototype)&&Object.defineProperty(r.RTCTrackEvent.prototype,"transceiver",{get:function(){return{receiver:this.receiver}}})}function ta(r){var i=r.RTCPeerConnection.prototype.createOffer;r.RTCPeerConnection.prototype.createOffer=function(u){if(u){typeof u.offerToReceiveAudio<"u"&&(u.offerToReceiveAudio=!!u.offerToReceiveAudio);var f=this.getTransceivers().find(function(m){return m.receiver.track.kind==="audio"});u.offerToReceiveAudio===!1&&f?f.direction==="sendrecv"?f.setDirection?f.setDirection("sendonly"):f.direction="sendonly":f.direction==="recvonly"&&(f.setDirection?f.setDirection("inactive"):f.direction="inactive"):u.offerToReceiveAudio===!0&&!f&&this.addTransceiver("audio",{direction:"recvonly"}),typeof u.offerToReceiveVideo<"u"&&(u.offerToReceiveVideo=!!u.offerToReceiveVideo);var p=this.getTransceivers().find(function(m){return m.receiver.track.kind==="video"});u.offerToReceiveVideo===!1&&p?p.direction==="sendrecv"?p.setDirection?p.setDirection("sendonly"):p.direction="sendonly":p.direction==="recvonly"&&(p.setDirection?p.setDirection("inactive"):p.direction="inactive"):u.offerToReceiveVideo===!0&&!p&&this.addTransceiver("video",{direction:"recvonly"})}return i.apply(this,arguments)}}function ra(r){ve(r)!=="object"||r.AudioContext||(r.AudioContext=r.webkitAudioContext)}const na=r=>{let i=!1,o;return(...u)=>(i||(o=r(u),i=!0),o)};function ie(r,i){if(r===!1)throw new Error(i!=null?i:"assertion failure")}const aa=na(()=>{const r=On(window);switch(r.browser){case"chrome":Ln(window,r);break;case"firefox":Bn(window,r);break;case"safari":qn(window,r);break;default:throw new Zt}});let se={isActive:!1};function dt(){if(se.isActive){se.videoEl.src="",se.videoEl.srcObject=null,se.videoEl.load();for(const r of se.stream.getTracks())se.stream.removeTrack(r),r.stop();se={isActive:!1}}}async function oa(r,{constraints:i,torch:o}){var p,m,w;if(window.isSecureContext!==!0)throw new _n;if(((p=navigator==null?void 0:navigator.mediaDevices)==null?void 0:p.getUserMedia)===void 0)throw new Zt;aa();const u=await navigator.mediaDevices.getUserMedia({audio:!1,video:i});if(r.srcObject!==void 0?r.srcObject=u:r.mozSrcObject!==void 0?r.mozSrcObject=u:window.URL.createObjectURL?r.src=window.URL.createObjectURL(u):window.webkitURL?r.src=window.webkitURL.createObjectURL(u):r.src=u.id,r.play(),await Promise.race([Jt(r,"loadeddata"),Qt(3e3).then(()=>{throw new $n})]),await Qt(500),o){const[b]=u.getVideoTracks();b.getCapabilities().torch?b.applyConstraints({advanced:[{torch:!0}]}):console.warn("device does not support torch capability")}se={videoEl:r,stream:u,isActive:!0};const[f]=se.stream.getVideoTracks();return(w=(m=f==null?void 0:f.getCapabilities)==null?void 0:m.call(f))!=null?w:{}}const dr=M.defineComponent({__name:"QrcodeStream",props:{constraints:{type:Object,default(){return{facingMode:"environment"}}},formats:{type:Array,default:()=>["qr_code"]},paused:{type:Boolean,default:!1},torch:{type:Boolean,default:!1},track:{type:Function}},emits:["detect","camera-on","camera-off","error"],setup(r,{emit:i}){const o=r,u=M.ref(),f=M.ref(),p=M.ref(),m=M.ref(!1),w=M.ref(!1);M.onMounted(()=>{w.value=!0}),M.onUnmounted(()=>{dt()});const b=M.computed(()=>({torch:o.torch,constraints:o.constraints,shouldStream:w.value&&!o.paused}));M.watch(b,async E=>{const I=p.value;ie(I!==void 0,"cameraSettings watcher should never be triggered when component is not mounted. Thus video element should always be defined.");const q=u.value;ie(q!==void 0,"cameraSettings watcher should never be triggered when component is not mounted. Thus canvas should always be defined.");const N=q.getContext("2d");if(ie(N!==null,"if cavnas is defined, canvas 2d context should also be non-null"),E.shouldStream)try{const j=await oa(I,E);w.value?(m.value=!0,i("camera-on",j)):dt()}catch(j){i("error",j)}else q.width=I.videoWidth,q.height=I.videoHeight,N.drawImage(I,0,0,I.videoWidth,I.videoHeight),dt(),m.value=!1,i("camera-off")},{deep:!0});const{formats:v}=M.toRefs(o);M.watch(v,E=>{w.value&&Sn(E)});const _=M.computed(()=>b.value.shouldStream&&m.value);M.watch(_,E=>{if(E){ie(u.value!==void 0,"shouldScan watcher should only be triggered when component is mounted. Thus pause frame canvas is defined"),S(u.value),ie(f.value!==void 0,"shouldScan watcher should only be triggered when component is mounted. Thus tracking canvas is defined"),S(f.value);const I=()=>o.track===void 0?500:40;ie(p.value!==void 0,"shouldScan watcher should only be triggered when component is mounted. Thus video element is defined"),Pn(p.value,{detectHandler:q=>i("detect",q),formats:o.formats,locateHandler:$,minDelay:I()})}});const S=E=>{const I=E.getContext("2d");ie(I!==null,"canvas 2d context should always be non-null"),I.clearRect(0,0,E.width,E.height)},$=E=>{const I=f.value;ie(I!==void 0,"onLocate handler should only be called when component is mounted. Thus tracking canvas is always defined.");const q=p.value;if(ie(q!==void 0,"onLocate handler should only be called when component is mounted. Thus video element is always defined."),E.length===0||o.track===void 0)S(I);else{const N=q.offsetWidth,j=q.offsetHeight,$e=q.videoWidth,Se=q.videoHeight,Me=Math.max(N/$e,j/Se),De=$e*Me,Ae=Se*Me,Be=De/$e,ft=Ae/Se,ht=(N-De)/2,pt=(j-Ae)/2,Re=({x:te,y:oe})=>({x:Math.floor(te*Be),y:Math.floor(oe*ft)}),ze=({x:te,y:oe})=>({x:Math.floor(te+ht),y:Math.floor(oe+pt)}),mt=E.map(te=>{const{boundingBox:oe,cornerPoints:vt}=te,{x:Pe,y:yt}=ze(Re({x:oe.x,y:oe.y})),{x:Ne,y:ue}=Re({x:oe.width,y:oe.height});return{...te,cornerPoints:vt.map(Ge=>ze(Re(Ge))),boundingBox:DOMRectReadOnly.fromRect({x:Pe,y:yt,width:Ne,height:ue})}});I.width=q.offsetWidth,I.height=q.offsetHeight;const ce=I.getContext("2d");o.track(mt,ce)}},H={width:"100%",height:"100%",position:"relative","z-index":"0"},U={width:"100%",height:"100%",position:"absolute",top:"0",left:"0"},W={width:"100%",height:"100%","object-fit":"cover"},L=M.computed(()=>_.value?W:{...W,visibility:"hidden",position:"absolute"});return(E,I)=>(M.openBlock(),M.createElementBlock("div",{style:H},[M.createElementVNode("video",{ref_key:"videoRef",ref:p,style:M.normalizeStyle(L.value),autoplay:"",muted:"",playsinline:""},null,4),M.withDirectives(M.createElementVNode("canvas",{id:"qrcode-stream-pause-frame",ref_key:"pauseFrameRef",ref:u,style:W},null,512),[[M.vShow,!_.value]]),M.createElementVNode("canvas",{id:"qrcode-stream-tracking-layer",ref_key:"trackingLayerRef",ref:f,style:U},null,512),M.createElementVNode("div",{style:U},[M.renderSlot(E.$slots,"default")])]))}}),fr=M.defineComponent({__name:"QrcodeCapture",props:{formats:{type:Array,default:()=>["qr_code"]}},emits:["detect"],setup(r,{emit:i}){const o=r,u=f=>{if(!(!(f.target instanceof HTMLInputElement)||!f.target.files))for(const p of Array.from(f.target.files))Kt(p,o.formats).then(m=>{i("detect",m)})};return(f,p)=>(M.openBlock(),M.createElementBlock("input",{onChange:u,type:"file",name:"image",accept:"image/*",capture:"environment",multiple:""},null,32))}}),ia=["onDrop"],hr=M.defineComponent({__name:"QrcodeDropZone",props:{formats:{type:Array,default:()=>["qr_code"]}},emits:["detect","dragover","error"],setup(r,{emit:i}){const o=r,u=async m=>{try{const w=await m;i("detect",w)}catch(w){i("error",w)}},f=m=>{i("dragover",m)},p=({dataTransfer:m})=>{if(!m)return;f(!1);const w=[...Array.from(m.files)],b=m.getData("text/uri-list");w.forEach(v=>{u(Kt(v))}),b!==""&&u(En(b,o.formats))};return(m,w)=>(M.openBlock(),M.createElementBlock("div",{onDrop:M.withModifiers(p,["prevent","stop"]),onDragenter:w[0]||(w[0]=M.withModifiers(b=>f(!0),["prevent","stop"])),onDragleave:w[1]||(w[1]=M.withModifiers(b=>f(!1),["prevent","stop"])),onDragover:w[2]||(w[2]=M.withModifiers(()=>{},["prevent","stop"]))},[M.renderSlot(m.$slots,"default")],40,ia))}});function pr(r){r.component("qrcode-stream",dr),r.component("qrcode-capture",fr),r.component("qrcode-drop-zone",hr)}const mr={install:pr};let Ve=null;typeof window<"u"?Ve=window.Vue:typeof global<"u"&&(Ve=global.Vue),Ve&&Ve.use(mr),ee.QrcodeCapture=fr,ee.QrcodeDropZone=hr,ee.QrcodeStream=dr,ee.VueQrcodeReader=mr,ee.install=pr,ee.setZXingModuleOverrides=pn,Object.defineProperty(ee,Symbol.toStringTag,{value:"Module"})});
